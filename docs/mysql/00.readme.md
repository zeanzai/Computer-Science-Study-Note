
## 课程材料

- [b站mysql高级视频](https://www.bilibili.com/video/av49181542/?p=179)
- [在centos7.5上面安装mysql5.7](https://zeanzai.me/Java-Linux/#/markdown/install-mysql)
- [mysql配置文件介绍](https://zeanzai.me/Java-Linux/#/markdown/mysql-config-file)
- [mysql5.7集群方案对比](https://blog.csdn.net/laogouhuli/article/details/92591386)

## 课程目录

- mysql架构介绍
  - mysql简介
  - Linux版的安装
  - 配置文件
  - 逻辑架构介绍
  - 存储引擎
- 索引优化分析
  - 性能下降SQL慢
  - 常用的join查询
  - 索引简介
  - 性能分析
  - 索引优化
- 查询截取分析
  - 查询优化
  - 慢查询日志
  - 批量数据脚本
  - show profile
  - 全局查询日志
- 锁机制
  - 行锁
  - 表锁
  - 页锁
- 主从复制


## 总结

### mysql概述

- 安装
- 配置文件讲解
- 逻辑架构
  - 连接
  - 连接池
  - 高级服务
  - SQL接口
  - SQL解析器
  - SQL优化器
  - 缓存
  - 存储引擎
  - 文件系统
- 存储引擎的分类及区别
  - innodb
    - 采用的是行级锁，支持的锁粒度较小，并发度较高；
    - 支持事务，自动提交；
  - myisam
    - 多采用的是表锁，支持的锁粒度较大，并发度较低；
    - 采用的是写操作优先策略，这就造成了在写操作过程中，会造成查询和更新操作的阻塞，所以不适合做写操作较多的数据库的存储引擎；
    - 不支持事务；
- mysql的锁
  - 事务、acid、隔离级别
  - 表锁
    - 多用于myisam
    - 如何加锁、解锁
    - 加锁后不同的会话的操作权限
    - 分析工具
  - 行锁
    - 多用于innodb
    - 如何加锁、解锁
    - 加锁后不同会话的操作权限
    - 分析工具
  - 间歇锁
    - 概念
    - 行锁变表锁
  - 页锁
- 并发带来的问题
- 隔离级别


### mysql性能低下的原因及处理办法

- 四个工具+两套部署
  - 四个工具
    - SQL优化器
    - 慢查询日志
    - show profile
    - 全局查询日志
  - 两套部署
    - 读写分离
    - 集群
- 解决思路
  - 生产环境下至少跑一天
  - 开启慢查询日志，统计慢SQL语句
  - explain+慢sql进行分析
  - show profile
  - 生产服务器参数调优
- SQL优化器
  - 是什么
  - 能干嘛
  - 怎么玩
  - 各字段解释
- SQL写的烂
  - select的不正当使用
    - 问题：导致索引失效
    - 索引概述
      - 定义
      - 分类
      - 语法
      - 数据结构
      - 优缺点
    - 失效原因
    - 解决办法
  - join的不正当使用
    - 七种用法
  - order by的不正当使用
    - 优化
  - group by的不正当使用
    - 优化
  - 嵌套查询的不正当使用
    - 优化
  - 其他关键字的不正当使用
    - in
    - exists
- 硬件设施较差
  - 查询原因
  - 优化措施
    - 更换硬件设施


### MySQL数据库服务的高可用

- 3高问题
  - 单表数据量过大
    - 分表
      - 水平分表
      - 垂直分表
  - 表太多
    - 分库
  - 并发访问过高
    - 应用程序加锁机制
- 3高应对策略
  - 主从复制
  - 读写分离
  - 分库分表
  - 集群
